//
// ux.js v0.4.0
//
// https://github.com/lyngbach/ux.js
//
// Copyright 2015, Rune Lyngbach Jensen
// Email: lyngbachjensen@gmail.com
//
// licensed under MIT

var ux=function(t){"use strict";var i;this.uxId=0,this.options=t||{},this.options.widthMargin=this.options.widthMargin||70,this.options.topMargin=this.options.topMargin||27,this.options.sliderMode=this.options.sliderMode||!1,this.options.firstTime=this.options.firstTime||!1,this.onBrowserResize=function(){var t=this;clearTimeout(i),i=setTimeout(function(){t.reAdjust()},150)},window.onresize=this.onBrowserResize.bind(this),this.checkFirstTime()};ux.prototype.checkFirstTime=function(){this.options.firstTime===!0&&null===localStorage.getItem("uxFirstTime")&&(this.show(),localStorage.setItem("uxFirstTime",!0))},ux.prototype.show=function(){"use strict";var t,i,e=document.querySelectorAll("[data-ux-text]");for(this.uxId=0,i=0;i<e.length;i+=1)this.addTooltip(e[i]);t=document.createElement("div"),t.className="ux_overlay",t.id="ux_overlay",t.onclick=this.hide,document.body.appendChild(t),window.requestAnimationFrame(function(){t.className+=" fade"})},ux.prototype.hide=function(){"use strict";var t,i=document.querySelectorAll(".ux_tooltip"),e=document.getElementById("ux_overlay");for(t=0;t<i.length;t+=1)i[t].parentNode.removeChild(i[t]);e.className="ux_overlay",setTimeout(function(){e.parentNode.removeChild(e)},300)},ux.prototype.visible=function(){"use strict";var t=document.getElementById("ux_overlay");return t},ux.prototype.addTooltip=function(t){"use strict";if(this.isVisible(t)===!0){this.uxId+=1;var i=document.createElement("div");i.innerHTML=t.getAttribute("data-ux-text"),null===t.getAttribute("data-ux-original")&&t.setAttribute("data-ux-original",t.getAttribute("data-ux-position")),i.className="ux_tooltip",i.id="ux"+this.uxId,document.body.appendChild(i),this.positionTooltip(t,i)}},ux.prototype.isVisible=function(t){"use strict";var i=t.getBoundingClientRect();return i.left>0&&i.left<window.innerWidth||this.options.sliderMode===!1?!0:!1},ux.prototype.positionTooltip=function(t,i){"use strict";switch(i%1===0&&(i=document.getElementById("ux"+i)),this.getPosition(t)){case"top":this.responsive(t,i);break;case"topLeft":this.responsive(t,i);break;case"topRight":this.responsive(t,i);break;case"right":this.responsive(t,i);break;case"bottom":this.responsive(t,i);break;case"bottomRight":this.responsive(t,i);break;case"bottomLeft":this.responsive(t,i);break;case"left":this.responsive(t,i)}},ux.prototype.getPosition=function(t){"use strict";return t.getAttribute("data-ux-position")||"bottom"},ux.prototype.setPosition=function(t,i,e){"use strict";switch(t.getAttribute("data-ux-position")){case"top":i.className="ux_tooltip ux_top",i.style.left=e.x+t.offsetWidth/2-i.offsetWidth/2+"px",i.style.top=e.y-i.offsetHeight-this.options.widthMargin+"px";break;case"topLeft":i.className="ux_tooltip ux_top_left",i.style.left=e.x-i.offsetWidth+t.offsetWidth/2-this.options.widthMargin+"px",i.style.top=e.y-i.offsetHeight-this.options.topMargin+"px";break;case"topRight":i.className="ux_tooltip ux_top_right",i.style.left=e.x+t.offsetWidth/2+this.options.widthMargin+"px",i.style.top=e.y-i.offsetHeight-this.options.topMargin+"px";break;case"right":i.className="ux_tooltip ux_right",i.style.left=e.x+t.offsetWidth+this.options.widthMargin+"px",i.style.top=e.y+(t.offsetHeight-i.offsetHeight)/2+"px";break;case"bottom":i.className="ux_tooltip ux_bottom",i.style.left=e.x+t.offsetWidth/2-i.offsetWidth/2+"px",i.style.top=e.y+t.offsetHeight+this.options.widthMargin+"px";break;case"bottomRight":i.className="ux_tooltip ux_bottom_right",i.style.left=e.x+t.offsetWidth/2+this.options.widthMargin+"px",i.style.top=e.y+t.offsetHeight+this.options.topMargin+"px";break;case"bottomLeft":i.className="ux_tooltip ux_bottom_left",i.style.left=e.x-i.offsetWidth+t.offsetWidth/2-this.options.widthMargin+"px",i.style.top=e.y+t.offsetHeight+this.options.topMargin+"px";break;case"left":i.className="ux_tooltip ux_left",i.style.left=e.x-i.offsetWidth-this.options.widthMargin+"px",i.style.top=e.y+(t.offsetHeight-i.offsetHeight)/2+"px"}},ux.prototype.getCoordinates=function(t,i){"use strict";var e=t.getBoundingClientRect(),o=e.left,s=e.top;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(s+=window.pageYOffset),this.setPosition(t,i,{x:o,y:s})},ux.prototype.getOffset=function(t){"use strict";var i=t.getBoundingClientRect();return{x:i.left,y:i.top}},ux.prototype.responsive=function(t,i){"use strict";var e,o,s=this;switch(t.getAttribute("data-ux-position")){case"top":this.getCoordinates(t,i);break;case"topLeft":this.getCoordinates(t,i);break;case"topRight":this.getCoordinates(t,i);break;case"right":this.getCoordinates(t,i);break;case"bottom":this.getCoordinates(t,i);break;case"bottomRight":this.getCoordinates(t,i);break;case"bottomLeft":this.getCoordinates(t,i);break;case"left":this.getCoordinates(t,i)}setTimeout(function(){if(s.options.responsive)switch(t.getAttribute("data-ux-original")){case"left":case"topLeft":case"bottomLeft":s.getOffset(t).x<i.offsetWidth+s.options.widthMargin?(e=t.getBoundingClientRect(),o=e.left,t.offsetWidth/2+o<100+s.options.widthMargin?window.innerWidth-(t.offsetWidth/2+o)<110+s.options.widthMargin?"bottomLeft"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottom"):t.setAttribute("data-ux-position","top"):"bottomLeft"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottomRight"):t.setAttribute("data-ux-position","topRight"):t.offsetWidth/2+o<i.offsetWidth+s.options.widthMargin?"bottomLeft"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottom"):t.setAttribute("data-ux-position","top"):"bottomLeft"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottomLeft"):t.setAttribute("data-ux-position","topLeft")):t.setAttribute("data-ux-position",t.getAttribute("data-ux-original"));break;case"right":case"topRight":case"bottomRight":window.innerWidth-(s.getOffset(t).x+t.offsetWidth)<110+s.options.widthMargin?window.innerWidth-(s.getOffset(t).x+t.offsetWidth/2)>110+s.options.widthMargin?"bottomRight"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottomRight"):t.setAttribute("data-ux-position","topRight"):t.offsetWidth/2+s.getOffset(t).x<i.offsetWidth+s.options.widthMargin?"bottomRight"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottom"):t.setAttribute("data-ux-position","top"):"bottomRight"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottomLeft"):t.setAttribute("data-ux-position","topLeft"):t.setAttribute("data-ux-position",t.getAttribute("data-ux-original")),setTimeout(function(){t.offsetWidth/2+s.getOffset(t).x<i.offsetWidth+s.options.widthMargin&&("bottomRight"===t.getAttribute("data-ux-original")?t.setAttribute("data-ux-position","bottom"):t.setAttribute("data-ux-position","top")),s.getCoordinates(t,i)},300)}s.getCoordinates(t,i)},300)},ux.prototype.reAdjust=function(){"use strict";if(this.uxId=0,null!==this.visible()){var t,i=document.querySelectorAll("[data-ux-text]");for(t=0;t<i.length;t+=1)this.isVisible(i[t])===!0&&(this.uxId+=1,this.positionTooltip(i[t],this.uxId))}};